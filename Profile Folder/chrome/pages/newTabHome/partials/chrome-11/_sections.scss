& {
	--default-section-color: black;
	--section-color: var(--default-section-color);
	--default-spacer-background-color: rgb(229, 229, 229);
	--spacer-background-color: var(--default-spacer-background-color);

	@media (prefers-color-scheme: dark) {
		--section-color: white;
		--spacer-background-color: rgb(61, 61, 61);
	}

	// Custom theme support
	// lwtheme
	&[gkthemed]:not([gkchrthemed]) {
		--section-color: var(--newtab-text-primary-color, currentColor);
		--spacer-background-color: color-mix(in srgb, var(--lwt-accent-color) 70%, transparent);
	}

	// chrtheme
	&[gkthemed][gkchrthemed] {
		--section-color: var(--chrtheme-ntp-text, var(--default-section-color));
		--spacer-background-color: var(--chrtheme-ntp-section, var(--default-spacer-background-color));
	}

	// GTK+
	&[gksystheme="gtk"]:not([lwtheme], [gkthemed], [gkchrthemed]) {
		--section-color: FieldText;
		--spacer-background-color: color-mix(in srgb, FieldText 20%, transparent);

		--recently-closed-item-color: -moz-dialogtext;
	}
}

.sections {
	.section {
		cursor: pointer;
		margin-inline-start: -14px;
		margin-inline-end: -21px;
		align-items: center;
		font-size: 12pt;
		color: var(--section-color);

		&.collapsed {
			+ div {
				display: flex;
				flex-direction: row;
				gap: 20px;

				.item {
					align-items: center;
					max-width: 114px;
					-moz-context-properties: fill, fill-opacity;
					fill: var(--recently-closed-item-color);

					.icon {
						display: none;
					}

					label {
						white-space: nowrap;
						overflow: hidden;
						text-overflow: ellipsis;
					}
				}
			}
		}
		&:not(.collapsed) {
			+ div {
				display: grid;
				gap: 0px;
				grid-template-columns: repeat(6, minmax(0, 1fr));

				.item {
					border-radius: 10px;
					flex-direction: column;
					margin: 5px 3px;
					padding: 10px;
					height: 136px;
					width: 124px;
					text-decoration: none;
					transition: background-color .5s;

					&:hover {
						background-color: rgb(229, 229, 229);
					}

					> .favicon {
						display: none;
					}

					> label {
						font-size: 10pt;
						text-align: center;
					}
				}
			}

			.disclosure {
				transform: rotate(90deg);
			}						
		}

		+ div {
			.item {
				display: flex;
				color: var(--link-color, --default-link-color);

				> .favicon {
					width: 16px;
					height: 16px;
					margin-inline-end: 3px;
				}

				> .icon {
					margin: auto;
					width: 96px;
					height: 96px;
				}
			}
		}

		.disclosure {
			width: 9px;
			height: 9px;
			margin-inline-end: 5px;
			background-image: url("chrome://userchrome/content/pages/newTabHome/assets/chrome-11/imgs/accordion-chevron.svg");
			background-repeat: no-repeat;
			background-position: center;
			transition: transform .15s;
		}

		spacer {
			height: 1px;
			background-color: var(--spacer-background-color);
			margin-inline: 4px;
		}

		button {
			all: unset;
		}

		.section-close-button {
			width: 21px;
			height: 21px;
		}
	}
}

#apps-content,
#most-viewed-content,
#recently-closed-content {
	padding-block-start: 9px;
	margin-block-end: 30px;
}